<section
  id="highlight"
  class="relative min-h-screen flex items-center justify-center pt-20 overflow-hidden bg-gray-900"
  aria-label="Destaque Principal"
>
  <!-- Fundo Otimizado -->
  <div class="absolute inset-0 z-0">
    <img
      src="assets/hero-pattern.jpg"
      alt="Background"
      class="w-full h-full object-cover opacity-40"
    />
    <div
      class="absolute inset-0 bg-gradient-to-r from-gray-900 via-gray-900/90 to-gray-900/60"
    ></div>
  </div>

  <!-- Efeito de Luz (Blur) -->
  <div
    class="absolute top-1/4 left-1/4 w-[500px] h-[500px] bg-red-600/20 rounded-full blur-[120px] z-0 pointer-events-none animate-pulse-slow"
  ></div>

  <div
    class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center"
  >
    <!-- Texto e CTA -->
    <div
      class="text-center lg:text-left pt-10 lg:pt-0 relative order-2 lg:order-1 pointer-events-none"
    >
      <div class="pointer-events-auto">
        <div
          class="inline-flex items-center gap-3 py-2 px-5 rounded-full bg-white/5 backdrop-blur-md border border-yellow-500/30 mb-8"
        >
          <span class="relative flex h-2 w-2">
            <span
              class="animate-ping absolute inline-flex h-full w-full rounded-full bg-yellow-400 opacity-75"
            ></span>
            <span class="relative inline-flex rounded-full h-2 w-2 bg-yellow-500"></span>
          </span>
          <span class="text-yellow-50 text-xs font-bold tracking-[0.2em] uppercase">
            Feirão de Seminovos
          </span>
        </div>

        <h1
          class="text-5xl md:text-6xl lg:text-7xl font-black text-white mb-6 leading-[1.1] tracking-tight drop-shadow-2xl"
        >
          SEU PRÓXIMO <br />CARRO
          <span class="text-yellow-400">ESTÁ AQUI</span>
        </h1>

        <p
          class="mt-6 text-lg md:text-xl text-gray-300 mb-10 font-light max-w-lg mx-auto lg:mx-0 leading-relaxed"
        >
          Concessionária com mais de <strong class="text-white">300 seminovos revisados</strong>.
          Garantia de procedência, taxas exclusivas e a melhor avaliação do seu usado na troca.
        </p>

        <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
          <a
            href="#showroom"
            (click)="scrollToSection($event, 'showroom')"
            class="group relative px-8 py-4 bg-red-600 hover:bg-red-700 text-white font-bold rounded-full transition-all shadow-lg hover:shadow-red-600/40 flex items-center justify-center gap-3"
          >
            <span>Ver Estoque</span>
            <i
              data-lucide="arrow-right"
              class="w-5 h-5 group-hover:translate-x-1 transition-transform"
            ></i>
          </a>

          <a
            href="#financing"
            (click)="scrollToSection($event, 'financing')"
            class="px-8 py-4 bg-white/5 backdrop-blur-sm border border-white/10 hover:border-white/30 text-white font-bold rounded-full transition-all hover:bg-white/10"
          >
            Simular Financiamento
          </a>
        </div>

        <div class="mt-12 flex items-center justify-center lg:justify-start gap-8 opacity-80">
          <div class="flex items-center gap-3">
            <i data-lucide="shield-check" class="w-6 h-6 text-yellow-400"></i>
            <div class="flex flex-col text-left">
              <span class="text-[10px] text-gray-400 uppercase font-semibold">Garantia</span>
              <span class="text-sm text-white font-bold">Total</span>
            </div>
          </div>
          <div class="flex items-center gap-3">
            <i data-lucide="check-circle" class="w-6 h-6 text-yellow-400"></i>
            <div class="flex flex-col text-left">
              <span class="text-[10px] text-gray-400 uppercase font-semibold">Veículos</span>
              <span class="text-sm text-white font-bold">100% Revisados</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 3D Viewer OTIMIZADO -->
    <div
      class="relative mt-0 lg:mt-0 h-[400px] lg:h-[600px] flex items-center justify-center order-1 lg:order-2"
    >
      <div
        class="absolute top-4 right-4 z-20 bg-black/50 backdrop-blur text-white text-[10px] px-2 py-1 rounded opacity-50 pointer-events-none"
      >
        Use 2 dedos para mover
      </div>

      <!-- Adicionado (load)="onModelLoaded()" e transition classes -->
      <model-viewer
        [src]="currentModelSrc"
        (load)="onModelLoaded()"
        alt="Carro Destaque 3D"
        camera-orbit="45deg 75deg 100%"
        field-of-view="25deg"
        auto-rotate
        rotation-per-second="3deg"
        camera-controls
        disable-zoom
        shadow-intensity="1"
        exposure="1"
        loading="eager"
        class="w-full h-full focus:outline-none cursor-grab active:cursor-grabbing transition-opacity duration-500 ease-in-out"
        [class.opacity-0]="isTransitioning"
        [class.opacity-100]="!isTransitioning"
        style="--poster-color: transparent"
      >
      </model-viewer>

      <!-- Indicadores -->
      <div class="absolute bottom-10 right-10 flex flex-col gap-2 z-20 pointer-events-none">
        <div
          *ngFor="let car of carModels; let i = index"
          class="w-2 h-2 rounded-full transition-all duration-300 shadow-sm"
          [class.bg-yellow-400]="i === currentCarIndex"
          [class.h-6]="i === currentCarIndex"
          [class.bg-white/30]="i !== currentCarIndex"
        ></div>
      </div>
    </div>
  </div>

  <a
    href="#showroom"
    (click)="scrollToSection($event, 'showroom')"
    class="absolute bottom-8 left-1/2 -translate-x-1/2 text-white/30 hover:text-white transition-colors animate-bounce cursor-pointer z-20 p-2"
  >
    <i data-lucide="chevron-down" class="w-8 h-8"></i>
  </a>
</section>
